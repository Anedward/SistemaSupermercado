<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"> 

<h:head>
	<f:metadata>
		<f:viewParam name="id" value="#{facturaDetalleController.id}"></f:viewParam>
		<f:viewAction action="#{facturaDetalleController.loadData()}"/>
	</f:metadata>

</h:head> 

<body> 

<h:form>
	<h:panelGrid columns="3">
		<h:outputLabel value="Codigo" />
		<h:inputText value="#{facturaDetalleController.factura.codigo}" id="txtCodigo"/>
		<h:message for="txtCodigo"/>
		
		<h:outputLabel value="Numero de Factura" />
		<h:inputText value="#{facturaDetalleController.factura.numFact}" id="txtFactura"/>
		<h:message for="txtFactura"/>
		
		<h:outputLabel value="Fecha" />
		<h:inputText value="#{facturaDetalleController.factura.fechaEmision}" id="txttFecha" />
		<h:message for="txtFecha"/>
		
		<h:outputLabel value="Iva" />
		<h:inputText value="#{facturaDetalleController.factura.iva}" id="txtIva" />
		<h:message for="txtIva"/>
		
		<h:outputLabel value="Total" />
		<h:inputText value="#{facturaDetalleController.factura.total}" id="txtTotal" />
		<h:message for="txtTotal"/>
		<h:outputLabel value="Detalles" />
		
		<h:dataTable value="#{facturaDetalleController.detalle}" var="det">
			<h:column>
				<f:facet name="header">CÃ³digo</f:facet>
				<h:inputText value="#{det.codigo}" />
			</h:column>
		
			<h:column>
				<f:facet name="header">Cantidad</f:facet>
				<h:inputText value="#{det.cantidad}" />
			</h:column>
			</h:dataTable >
			
			<h:dataTable value="#{facturaDetalleController.detalle}" var="det">
			<h:column>
				<f:facet name="header">Factura</f:facet>
				<h:inputText value="#{facturaDetalleController.detalle.idFacturaTemp}" id="txFactura">
				<f:ajax listener="#{facturaDetalleController.consultarFactura()}" execute="txtFactura" render="datosFactura"/>
				</h:inputText>
				<h:panelGroup id="datosFactura">
			<h:message for="txtFactura" />
			#{facturaDetalleController.detalle.factura.codigo}
			</h:panelGroup>
				
			</h:column>
			
		</h:dataTable>
		
			<h:dataTable value="#{facturaDetalleController.detalle}" var="det">
			<h:column>
				<f:facet name="header">Producto</f:facet>
				<h:inputText value="#{facturaDetalleController.detalle.idProductoTemp}" id="txProducto">
				<f:ajax listener="#{facturaDetalleController.consultarProducto()}" execute="txProducto" render="datosProducto"/>
				</h:inputText>
				<h:panelGroup id="datosProducto">
			<h:message for="txtProducto" />
			#{facturaDetalleController.detalle.producto.nombre}
			</h:panelGroup>
				
			</h:column>
			
		</h:dataTable>
		
		
	
		<h:commandButton action="#{facturaDetalleController.addDetalles()}" value="+ detalles" />
	
		<h:outputText value="" />
		
		<h:commandButton action="#{facturaDetalleController.addProductos()}" value="Agregar Producto" />
		
		<h:commandButton action="#{facturaDetalleController.guardarDatos()}" value="Guardar" />
		
		
	
	</h:panelGrid>
	


</h:form>


</body> 
</html>